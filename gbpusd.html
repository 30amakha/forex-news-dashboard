<!DOCTYPE html>
<html lang="fa">
<head>
  <meta charset="UTF-8">
  <title>GBP/USD - داشبورد تحلیل</title>
  <style>
    body { font-family: sans-serif; background: #f9f9f9; padding: 20px; }
    .event { background: white; padding: 15px; margin-bottom: 15px; border-radius: 8px; box-shadow: 0 0 5px rgba(0,0,0,0.1); }
    h1, h2 { color: #333; }
  </style>
</head>
<body>
  <h1>💱 جفت ارز: GBP/USD</h1>

  <h2>📈 نمودار زنده</h2>
  <div class="tradingview-widget-container">
    <div id="tv_chart"></div>
    <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
    <script type="text/javascript">
      new TradingView.widget({
        "width": "100%",
        "height": 400,
        "symbol": "FX:GBPUSD",
        "interval": "1",
        "timezone": "Etc/UTC",
        "theme": "light",
        "style": "1",
        "locale": "fa",
        "toolbar_bg": "#f1f3f6",
        "hide_top_toolbar": true,
        "container_id": "tv_chart"
      });
    </script>
  </div>

  <h2>📰 اطلاعات خبر اقتصادی</h2>
  <div id="news">در حال بارگذاری...</div>

  <h2>🖼️ تصویر چارت ۱ دقیقه‌ای پس از خبر</h2>
  <img src="assets/chart-images/gbpusd-latest.png" alt="چارت GBP/USD" width="100%">

  <script>
    async function loadNews() {
      const res = await fetch("https://forex-news-worker.siamak-hashemi.workers.dev/gbpusd.html");
      const data = await res.json();

      const container = document.getElementById("news");
      container.innerHTML = "";
      data.forEach(event => {
        container.innerHTML += `
          <div class="event">
            <strong>📊 عنوان خبر:</strong> ${event.title}<br>
            <strong>💱 نوع ارز:</strong> GBP/USD<br>
            <strong>🔥 اهمیت خبر:</strong> ${event.importance}<br>
            <strong>📈 پیش‌بینی:</strong> ${event.forecast}<br>
            <strong>📉 مقدار واقعی:</strong> ${event.actual}<br>
            <strong>📌 احتمال حرکت:</strong> ${event.predictedImpact} پیپ ${event.direction}<br>
            <strong>🕒 ساعت وقوع:</strong> ${event.time}
          </div>
        `;
      });
    }

    loadNews();
  </script>
</body>
</html>
